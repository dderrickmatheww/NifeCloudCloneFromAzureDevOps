generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model business_events {
  eventId      Int         @id @default(autoincrement())
  businessId   Int?
  businessUID  String      @db.VarChar
  lastModified DateTime?   @db.Timestamp(6)
  created      DateTime?   @db.Timestamp(6)
  userId       Int?
  eventtype    eventtype?
  description  String?     @db.VarChar
  businesses   businesses? @relation(fields: [businessId], references: [businessId], onDelete: NoAction, onUpdate: NoAction)
  users        users?      @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model businesses {
  userId               Int?
  uuid                 String                 @unique(map: "businesses_businessUID_key") @db.VarChar
  lastModified         DateTime?              @db.Timestamp(6)
  created              DateTime?              @db.Timestamp(6)
  address              String?                @db.VarChar
  email                String?                @db.VarChar
  displayName          String?                @db.VarChar
  phoneNumber          String?                @db.VarChar
  latitude             String?                @db.VarChar
  longitude            String?                @db.VarChar
  ownerName            String?                @db.VarChar
  photoSource          String?                @db.VarChar
  lastLogin            DateTime?              @db.Timestamp(6)
  businessId           Int                    @id @default(autoincrement())
  users                users?                 @relation(fields: [userId], references: [id], onDelete: Cascade)
  business_events      business_events[]
  user_check_ins       user_check_ins[]
  user_favorite_places user_favorite_places[]
  user_posts           user_posts[]
}

model user_favorite_places {
  id         Int         @id @default(autoincrement())
  created    DateTime?   @db.Timestamp(6)
  user       String?     @db.VarChar
  business   String?     @db.VarChar
  businesses businesses? @relation(fields: [business], references: [uuid], onDelete: NoAction, onUpdate: NoAction)
  users      users?      @relation(fields: [user], references: [uuid], onDelete: NoAction, onUpdate: NoAction)
}

model user_friends {
  id                                 Int       @id @default(autoincrement())
  userId                             Int?
  friendId                           Int
  isFriend                           String?   @default(dbgenerated("'1'::\"bit\"")) @db.Bit(1)
  isBlocked                          String?   @default(dbgenerated("'0'::\"bit\"")) @db.Bit(1)
  lastModified                       DateTime? @db.Timestamp(6)
  created                            DateTime? @db.Timestamp(6)
  users_user_friends_friendIdTousers users     @relation("user_friends_friendIdTousers", fields: [friendId], references: [id], onDelete: Cascade)
  users                              users?    @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model user_posts {
  postId      Int         @id @default(autoincrement())
  latitude    String?     @db.VarChar
  longitude   String?     @db.VarChar
  description String?     @db.VarChar
  userId      Int?
  businessId  Int?
  image       String?     @db.VarChar
  created     DateTime?   @db.Timestamp(6)
  isFlagged   String?     @db.Bit(1)
  businesses  businesses? @relation(fields: [businessId], references: [businessId], onDelete: NoAction, onUpdate: NoAction)
  users       users?      @relation(fields: [userId], references: [id], onDelete: Cascade)
}

model users {
  id                                        Int                    @id @default(autoincrement())
  bio                                       String?                @db.VarChar
  dateOfBirth                               String?                @db.VarChar
  displayName                               String?                @db.VarChar
  email                                     String?                @unique(map: "unique_email") @db.VarChar
  expoPushToken                             String?                @db.VarChar
  gender                                    String?                @db.VarChar
  phoneNumber                               String?                @db.VarChar
  photoSource                               String?                @db.VarChar
  sexualOrientation                         String?                @db.VarChar
  uuid                                      String?                @unique(map: "user_unique_uuid") @db.VarChar
  businessId                                Int?
  lastModified                              DateTime?              @db.Timestamp(6)
  lastLogin                                 DateTime?              @db.Timestamp(6)
  created                                   DateTime?              @db.Timestamp(6)
  businessUID                               String?                @db.VarChar
  isFlagged                                 String?                @db.Bit(1)
  latitude                                  Float?
  longitude                                 Float?
  business_events                           business_events[]
  businesses                                businesses[]
  user_check_ins                            user_check_ins[]
  user_favorite_places                      user_favorite_places[]
  user_friends_user_friends_friendIdTousers user_friends[]         @relation("user_friends_friendIdTousers")
  user_friends                              user_friends[]
  user_posts                                user_posts[]
}

model user_check_ins {
  id         Int         @id @default(autoincrement())
  user       String?     @db.VarChar
  business   String?     @db.VarChar
  created    DateTime?   @db.Timestamp(6)
  isPrivate  String?     @db.Bit(1)
  businesses businesses? @relation(fields: [business], references: [uuid], onDelete: NoAction, onUpdate: NoAction)
  users      users?      @relation(fields: [user], references: [uuid], onDelete: NoAction, onUpdate: NoAction)
}

enum eventtype {
  Special
  Event
}
